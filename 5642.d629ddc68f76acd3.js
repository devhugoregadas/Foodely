"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5642],{5642:(T,M,a)=>{a.d(M,{K:()=>d});var e=a(9808),C=(a(5098),a(7110)),g=(a(3001),a(8081),a(7123),a(9863));let d=(()=>{class s{}return s.\u0275fac=function(u){return new(u||s)},s.\u0275mod=g.oAB({type:s}),s.\u0275inj=g.cJS({imports:[[e.ez,C.Pc]]}),s})()},8081:(T,M,a)=>{a.d(M,{s:()=>f});var e=a(9863),t=a(7110),C=a(9808);function p(l,g){if(1&l&&(e.TgZ(0,"ion-text")(1,"p"),e._uU(2),e.qZA()()),2&l){const i=e.oxw();e.xp6(2),e.Oqu(i.model.subTitle)}}let f=(()=>{class l{constructor(){}ngOnInit(){}}return l.\u0275fac=function(i){return new(i||l)},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-empty-screen"]],inputs:{model:"model"},decls:9,vars:4,consts:[[1,"ion-text-center"],[3,"name","color"],[4,"ngIf"]],template:function(i,d){1&i&&(e.TgZ(0,"ion-grid")(1,"ion-row")(2,"ion-col",0),e._UZ(3,"ion-icon",1),e.qZA()(),e.TgZ(4,"ion-row")(5,"ion-col",0)(6,"ion-label"),e._uU(7),e.qZA(),e.YNc(8,p,3,1,"ion-text",2),e.qZA()()()),2&i&&(e.xp6(3),e.Q6J("name",null!=d.model&&d.model.icon?null==d.model?null:d.model.icon:"cart-outline")("color",null!=d.model&&d.model.color?d.model.color:"tertiary"),e.xp6(4),e.hij(" ",null!=d.model&&d.model.title?d.model.title:"Your Cart is Empty"," "),e.xp6(1),e.Q6J("ngIf",null==d.model?null:d.model.subTitle))},directives:[t.jY,t.Nd,t.wI,t.gu,t.Q$,C.O5,t.yW],styles:["ion-icon[_ngcontent-%COMP%]{font-size:18rem}"]}),l})()},3001:(T,M,a)=>{a.d(M,{R:()=>f});var e=a(9863),t=a(7110),C=a(9808);function p(l,g){1&l&&(e.TgZ(0,"ion-item",1)(1,"ion-thumbnail",2),e._UZ(2,"ion-skeleton-text",3),e.qZA(),e.TgZ(3,"ion-label")(4,"h4"),e._UZ(5,"ion-skeleton-text",4),e.qZA(),e.TgZ(6,"p"),e._UZ(7,"ion-skeleton-text",5),e.qZA(),e.TgZ(8,"p"),e._UZ(9,"ion-skeleton-text",6),e.qZA()()())}let f=(()=>{class l{constructor(){this.dummy=Array(10)}ngOnInit(){}}return l.\u0275fac=function(i){return new(i||l)},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-loading-restaurant"]],decls:2,vars:1,consts:[["lines","none",4,"ngFor","ngForOf"],["lines","none"],["slot","start"],["animated",""],[2,"width","50%"],[2,"width","80%"],[2,"width","60%"]],template:function(i,d){1&i&&(e.TgZ(0,"ion-list"),e.YNc(1,p,10,0,"ion-item",0),e.qZA()),2&i&&(e.xp6(1),e.Q6J("ngForOf",d.dummy))},directives:[t.q_,C.sg,t.Ie,t.Bs,t.CK,t.Q$],styles:["ion-thumbnail[_ngcontent-%COMP%]{width:25vw;height:16vh}ion-thumbnail[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{border-radius:5px}"]}),l})()},5098:(T,M,a)=>{a.d(M,{m:()=>g});var e=a(9863),t=a(7110),C=a(9808);function p(i,d){if(1&i&&(e.TgZ(0,"span"),e._UZ(1,"ion-icon",7),e._uU(2),e.qZA()),2&i){const s=e.oxw();e.xp6(2),e.hij(" ",null==s.restaurant?null:s.restaurant.rating," . ")}}function f(i,d){if(1&i&&(e.TgZ(0,"ion-text",8)(1,"p",9),e._uU(2),e.ALo(3,"number"),e.qZA()()),2&i){const s=e.oxw();e.xp6(2),e.hij("",e.xi3(3,1,null==s.restaurant?null:s.restaurant.distance,"0.0-2")," kms away")}}function l(i,d){1&i&&(e.TgZ(0,"ion-text",8)(1,"p",9),e._uU(2,"Few steps away"),e.qZA()())}let g=(()=>{class i{constructor(){this.fallbackImage="assets/imgs/1.jpg"}ngOnInit(){}getCuisine(s){return s.join(", ")}onImgError(s){s.target.src=this.fallbackImage}}return i.\u0275fac=function(s){return new(s||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-restaurant"]],inputs:{restaurant:"restaurant"},decls:13,vars:8,consts:[["lines","none"],["slot","start"],[3,"src","error"],["color","medium"],[1,"pStyle"],[4,"ngIf"],["color","tertiary",4,"ngIf"],["name","star"],["color","tertiary"],[1,"distance"]],template:function(s,n){1&s&&(e.TgZ(0,"ion-item",0)(1,"ion-thumbnail",1)(2,"img",2),e.NdJ("error",function(m){return n.onImgError(m)}),e.qZA()(),e.TgZ(3,"ion-label")(4,"h4"),e._uU(5),e.qZA(),e.TgZ(6,"ion-text",3)(7,"p",4),e._uU(8),e.qZA()(),e.YNc(9,p,3,1,"span",5),e._uU(10),e.YNc(11,f,4,4,"ion-text",6),e.YNc(12,l,3,0,"ion-text",6),e.qZA()()),2&s&&(e.xp6(2),e.Q6J("src",null!=n.restaurant&&n.restaurant.cover?n.restaurant.cover:n.fallbackImage,e.LSH),e.xp6(3),e.Oqu(null==n.restaurant?null:n.restaurant.name),e.xp6(3),e.hij(" ",n.getCuisine(null==n.restaurant?null:n.restaurant.cuisines)," "),e.xp6(1),e.Q6J("ngIf",(null==n.restaurant?null:n.restaurant.rating)>0),e.xp6(1),e.AsE(" ",null==n.restaurant?null:n.restaurant.delivery_time," mins . CHF ",null==n.restaurant?null:n.restaurant.price," for two "),e.xp6(1),e.Q6J("ngIf",(null==n.restaurant?null:n.restaurant.distance)&&0!=(null==n.restaurant?null:n.restaurant.distance)),e.xp6(1),e.Q6J("ngIf",0==(null==n.restaurant?null:n.restaurant.distance)))},directives:[t.Ie,t.Bs,t.Q$,t.yW,C.O5,t.gu],pipes:[C.JJ],styles:["ion-item[_ngcontent-%COMP%]{font-size:.8rem}ion-item[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]{height:16vh;width:25vw}ion-item[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:5px;height:100%;width:100%}ion-item[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1rem;font-weight:700}.distance[_ngcontent-%COMP%]{font-size:.8rem;padding-top:.2vh}.pStyle[_ngcontent-%COMP%]{padding-bottom:.5vh;font-size:.82rem!important}"]}),i})()},7123:(T,M,a)=>{a.d(M,{t:()=>S});var e=a(655),t=a(9863),C=a(7020),p=a(9514),f=a(2875),l=a(7172),g=a(9808),i=a(7110);function d(r,E){1&r&&(t.TgZ(0,"ion-title",10)(1,"ion-label"),t._uU(2,"Choose a delivery address"),t.qZA()())}function s(r,E){if(1&r){const o=t.EpF();t.TgZ(0,"ion-buttons",11)(1,"ion-button",12),t.NdJ("click",function(){return t.CHM(o),t.oxw(2).dismiss()}),t._UZ(2,"ion-icon",13),t.qZA()()}}function n(r,E){if(1&r){const o=t.EpF();t.TgZ(0,"ion-searchbar",14,15),t.NdJ("ionChange",function(P){return t.CHM(o),t.oxw(2).onSearchChange(P)}),t.qZA()}}function u(r,E){if(1&r){const o=t.EpF();t.TgZ(0,"ion-buttons",16)(1,"ion-button",17),t.NdJ("click",function(){return t.CHM(o),t.oxw(2).dismiss()}),t._uU(2,"Cancel"),t.qZA()()}}function m(r,E){if(1&r&&(t.TgZ(0,"ion-header",4)(1,"ion-toolbar",5),t.YNc(2,d,3,0,"ion-title",6),t.YNc(3,s,3,0,"ion-buttons",7),t.YNc(4,n,2,0,"ion-searchbar",8),t.YNc(5,u,3,0,"ion-buttons",9),t.qZA()()),2&r){const o=t.oxw();t.xp6(2),t.Q6J("ngIf","cart"==o.from),t.xp6(1),t.Q6J("ngIf",o.from&&"select-place"==o.from),t.xp6(1),t.Q6J("ngIf",!o.from||"select-place"==o.from),t.xp6(1),t.Q6J("ngIf",!o.from)}}function c(r,E){if(1&r){const o=t.EpF();t.TgZ(0,"ion-item",18),t.NdJ("click",function(){return t.CHM(o),t.oxw().getCurrentPosition()}),t._UZ(1,"ion-icon",19),t.TgZ(2,"ion-label"),t._uU(3," Current location "),t.TgZ(4,"p"),t._uU(5,"Using GPS"),t.qZA()()()}}function h(r,E){1&r&&(t.TgZ(0,"ion-list-header")(1,"ion-text",22)(2,"h5"),t._uU(3,"SAVED ADDRESS"),t.qZA()()())}function v(r,E){if(1&r){const o=t.EpF();t.TgZ(0,"ion-item")(1,"ion-label"),t._uU(2,"Select Delivery Address"),t.qZA(),t.TgZ(3,"ion-button",23),t.NdJ("click",function(){return t.CHM(o),t.oxw(2).dismiss("select")}),t._uU(4,"VIEW ALL"),t.qZA()()}}function O(r,E){if(1&r){const o=t.EpF();t.TgZ(0,"ion-item",18),t.NdJ("click",function(){const y=t.CHM(o).$implicit;return t.oxw(2).selectSavedPlace(y)}),t._UZ(1,"ion-icon",24),t.TgZ(2,"ion-label"),t._uU(3),t.TgZ(4,"p"),t._uU(5),t.qZA()()()}if(2&r){const o=E.$implicit;t.xp6(3),t.hij(" ",null==o?null:o.title," "),t.xp6(2),t.Oqu(null==o?null:o.address)}}function L(r,E){if(1&r){const o=t.EpF();t.TgZ(0,"ion-item",25),t.NdJ("click",function(){return t.CHM(o),t.oxw(2).dismiss("select")}),t._UZ(1,"ion-icon",26),t.TgZ(2,"ion-text")(3,"h5"),t._uU(4,"Enter Location Manually"),t.qZA()()()}}function D(r,E){if(1&r){const o=t.EpF();t.TgZ(0,"ion-item",25),t.NdJ("click",function(){return t.CHM(o),t.oxw(2).dismiss("add")}),t._UZ(1,"ion-icon",27),t.TgZ(2,"ion-text",28)(3,"h5"),t._uU(4,"ADD NEW ADDRESS"),t.qZA()()()}}function x(r,E){if(1&r&&(t.TgZ(0,"ion-list"),t.YNc(1,h,4,0,"ion-list-header",3),t.YNc(2,v,5,0,"ion-item",3),t.YNc(3,O,6,2,"ion-item",20),t.YNc(4,L,5,0,"ion-item",21),t.YNc(5,D,5,0,"ion-item",21),t.qZA()),2&r){const o=t.oxw();t.xp6(1),t.Q6J("ngIf","select-place"==o.from),t.xp6(1),t.Q6J("ngIf","home"==o.from),t.xp6(1),t.Q6J("ngForOf",o.savedPlaces),t.xp6(1),t.Q6J("ngIf","home"==o.from),t.xp6(1),t.Q6J("ngIf","cart"==o.from||"select-place"==o.from)}}function I(r,E){if(1&r){const o=t.EpF();t.TgZ(0,"ion-item",18),t.NdJ("click",function(){const y=t.CHM(o).$implicit;return t.oxw(2).choosePlace(y)}),t._UZ(1,"ion-icon",29),t.TgZ(2,"ion-label"),t._uU(3),t.TgZ(4,"p"),t._uU(5),t.qZA()()()}if(2&r){const o=E.$implicit;t.xp6(3),t.hij(" ",null==o?null:o.title," "),t.xp6(2),t.Oqu(null==o?null:o.address)}}function Z(r,E){if(1&r&&(t.TgZ(0,"ion-list")(1,"ion-list-header")(2,"h5"),t._uU(3,"SEARCH RESULTS"),t.qZA()(),t.YNc(4,I,6,2,"ion-item",20),t.qZA()),2&r){const o=t.oxw();t.xp6(4),t.Q6J("ngForOf",o.places)}}let S=(()=>{class r{constructor(o,_,P,y){this.global=o,this.maps=_,this.locationService=P,this.addressService=y,this.places=[],this.savedPlaces=[]}ngOnInit(){this.placeSub=this.maps.places.subscribe(o=>{this.places=o}),this.from&&this.getSavedPlaces()}getSavedPlaces(){return(0,e.mG)(this,void 0,void 0,function*(){this.global.showLoader(),this.addressSub=this.addressService.addresses.subscribe(o=>{this.savedPlaces=o}),"home"==this.from?yield this.addressService.getAddresses(2):yield this.addressService.getAddresses(),this.global.hideLoader()})}selectSavedPlace(o){this.dismiss(o)}onSearchChange(o){return(0,e.mG)(this,void 0,void 0,function*(){console.log(o),this.global.showLoader(),this.query=o.detail.value,this.query.length>0&&(yield this.maps.getPlaces(this.query)),this.global.hideLoader()})}dismiss(o){this.global.modalDismiss(o)}choosePlace(o){return(0,e.mG)(this,void 0,void 0,function*(){if(this.global.showLoader(),console.log(o),this.from){const _=yield this.savedPlaces.find(P=>P.lat==o.lat&&P.lng==o.lng);(null==_?void 0:_.lat)&&(o=_)}this.global.hideLoader(),this.dismiss(o)})}getCurrentPosition(){return(0,e.mG)(this,void 0,void 0,function*(){try{this.global.showLoader();const o=yield this.locationService.getCurrentLocation(),{latitude:_,longitude:P}=o.coords,y=yield this.maps.getAddress(_,P);console.log(y);const A={title:y.address_components[0].short_name,address:y.formatted_address,lat:_,lng:P};this.global.hideLoader(),this.dismiss(A)}catch(o){console.log(o),this.global.hideLoader(),this.global.errorToast("Check whether GPS is enabled & the App has its permissions",5e3)}})}ngOnDestroy(){this.placeSub&&this.placeSub.unsubscribe(),this.addressSub&&this.addressSub.unsubscribe()}}return r.\u0275fac=function(o){return new(o||r)(t.Y36(C.U),t.Y36(p.t),t.Y36(f.a),t.Y36(l.D))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-search-location"]],inputs:{from:"from"},decls:5,vars:4,consts:[["class","ion-no-border",4,"ngIf"],[1,"ion-padding"],[3,"click",4,"ngIf"],[4,"ngIf"],[1,"ion-no-border"],["color","light"],["mode","md",4,"ngIf"],["slot","start",4,"ngIf"],["slot","start","animated","true","debounce","800","placeholder","Search for area, street...",3,"ionChange",4,"ngIf"],["slot","end",4,"ngIf"],["mode","md"],["slot","start"],["fill","clear",3,"click"],["name","arrow-back-outline","color","dark","slot","icon-only"],["slot","start","animated","true","debounce","800","placeholder","Search for area, street...",3,"ionChange"],["searchInput",""],["slot","end"],["fill","clear","color","dark",3,"click"],[3,"click"],["slot","start","name","locate-outline"],[3,"click",4,"ngFor","ngForOf"],["lines","none",3,"click",4,"ngIf"],["color","secondary"],["color","primary","fill","clear","size","small","slot","end",3,"click"],["name","location-outline","slot","start"],["lines","none",3,"click"],["name","search-outline","color","primary","slot","start"],["slot","start","name","add","color","primary"],["color","primary"],["slot","start","name","location-outline"]],template:function(o,_){1&o&&(t.YNc(0,m,6,4,"ion-header",0),t.TgZ(1,"ion-content",1),t.YNc(2,c,6,0,"ion-item",2),t.YNc(3,x,6,5,"ion-list",3),t.YNc(4,Z,5,1,"ion-list",3),t.qZA()),2&o&&(t.Q6J("ngIf",!_.from||"home"!=_.from),t.xp6(2),t.Q6J("ngIf",!_.from||"cart"!=_.from),t.xp6(1),t.Q6J("ngIf",_.from&&(!_.query||0==(null==_.query?null:_.query.length))),t.xp6(1),t.Q6J("ngIf",(null==_.places?null:_.places.length)>0&&(null==_.query?null:_.query.length)>0))},directives:[g.O5,i.Gu,i.sr,i.wd,i.Q$,i.Sm,i.YG,i.gu,i.VI,i.j9,i.W2,i.Ie,i.q_,i.yh,i.yW,g.sg],styles:[".ios[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{padding-top:3vh}"]}),r})()},3033:(T,M,a)=>{a.d(M,{k:()=>e});class e{constructor(C,p,f,l,g,i,d,s){this.uid=C,this.title=p,this.address=f,this.landmark=l,this.house=g,this.lat=i,this.lng=d,this.id=s}}},7172:(T,M,a)=>{a.d(M,{D:()=>g});var e=a(655),t=a(591),C=a(3033),p=a(9863),f=a(1228),l=a(5593);let g=(()=>{class i{constructor(s,n){this.auth=s,this.api=n,this._addresses=new t.X([]),this._addressChange=new t.X(null)}get addresses(){return this._addresses.asObservable()}get addressChange(){return this._addressChange.asObservable()}getUid(){return(0,e.mG)(this,void 0,void 0,function*(){return yield this.auth.getId()})}getAddresses(s){return(0,e.mG)(this,void 0,void 0,function*(){try{const n=yield this.getUid(),u=this.api.limitQuery(s);let m;m=s?yield this.api.getDocs(`address/${n}/all`,u):yield this.api.getDocs(`address/${n}/all`);const c=yield m.docs.map(h=>{let v=h.data();return v.id=h.id,v});return console.log(c),this._addresses.next(c),c}catch(n){throw console.log(n),n}})}addAddress(s){return(0,e.mG)(this,void 0,void 0,function*(){try{const n=yield this.getUid(),u=this._addresses.value,m=new C.k(n,s.title,s.address,s.landmark,s.house,s.lat,s.lng);let c=Object.assign({},m);delete c.id;const h=yield this.api.addDocument(`address/${n}/all`,c);console.log(h);const v=yield h.id,O=Object.assign(Object.assign({},c),{id:v});return u.push(O),this._addresses.next(u),this._addressChange.next(O),O}catch(n){throw n}})}updateAddress(s,n,u){return(0,e.mG)(this,void 0,void 0,function*(){try{u||(u=yield this.getUid()),yield this.api.updateDocument(`address/${u}/all/${s}`,n);let m=this._addresses.value;const c=m.findIndex(v=>v.id==s),h=new C.k(u,n.title,n.address,n.landmark,n.house,n.lat,n.lng,s);return m[c]=h,this._addresses.next(m),console.log("check data: ",h),this._addressChange.next(h),h}catch(m){throw m}})}deleteAddress(s){return(0,e.mG)(this,void 0,void 0,function*(){try{const n=yield this.getUid();yield this.api.deleteDocument(`address/${n}/all/${s.id}`);let u=this._addresses.value;return u=u.filter(m=>m.id!=s.id),this._addresses.next(u),u}catch(n){throw n}})}changeAddress(s){this._addressChange.next(s)}checkExistAddress(s){return(0,e.mG)(this,void 0,void 0,function*(){try{console.log("check exist address: ",s);let n=s;const u=yield this.getUid(),m=[this.api.whereQuery("lat","==",s.lat),this.api.whereQuery("lng","==",s.lng)],h=yield(yield this.api.getDocs(`address/${u}/all`,...m)).docs.map(v=>{let O=v.data();return O.id=v.id,O});return console.log("addresses: ",h),(null==h?void 0:h.length)>0&&(n=h[0]),console.log("loc: ",n),this.changeAddress(n),n}catch(n){throw n}})}}return i.\u0275fac=function(s){return new(s||i)(p.LFG(f.e),p.LFG(l.s))},i.\u0275prov=p.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()},9514:(T,M,a)=>{a.d(M,{t:()=>g});var e=a(655),t=a(2340),C=a(4850),p=a(591),f=a(9863),l=a(520);let g=(()=>{class i{constructor(s,n){this.http=s,this.zone=n,this._places=new p.X([]),this._markerChange=new p.X({})}get places(){return this._places.asObservable()}get markerChange(){return this._markerChange.asObservable()}loadGoogleMaps(){const s=window,n=s.google;return n&&n.maps?Promise.resolve(n.maps):new Promise((u,m)=>{const c=document.createElement("script");c.src="https://maps.googleapis.com/maps/api/js?key="+t.N.googleMapsApiKey+"&libraries=places",c.async=!0,c.defer=!0,document.body.appendChild(c),c.onload=()=>{const h=s.google;h&&h.maps?u(h.maps):m("Google Map SDK is not Available")}})}getAddress(s,n){return new Promise((u,m)=>{this.http.get(`https://maps.googleapis.com/maps/api/geocode/json?latlng=${s},${n}&key=${t.N.googleMapsApiKey}`).pipe((0,C.U)(c=>{if(!c||!c.results||0===c.results.length)throw null;return c.results[0]})).subscribe(c=>{u(c)},c=>{m(c)})})}getPlaces(s){return(0,e.mG)(this,void 0,void 0,function*(){try{this.googleMaps||(this.googleMaps=yield this.loadGoogleMaps());let n=this.googleMaps;console.log("maps: ",this.googleMaps),(new n.places.AutocompleteService).getPlacePredictions({input:s,componentRestrictions:{country:"IN"}},m=>{let c=[];this.zone.run(()=>{null!=m&&(m.forEach(h=>(0,e.mG)(this,void 0,void 0,function*(){console.log("prediction: ",h);let v=yield this.geoCode(h.description,n);const O={title:h.structured_formatting.main_text,address:h.description,lat:v.lat,lng:v.lng};console.log("places: ",O),c.push(O)})),this._places.next(c))})})}catch(n){console.log(n)}})}geoCode(s,n){let u={lat:"",lng:""};return new Promise((m,c)=>{(new n.Geocoder).geocode({address:s},v=>{console.log("results: ",v),u.lat=v[0].geometry.location.lat(),u.lng=v[0].geometry.location.lng(),m(u)})})}changeMarkerInMap(s){this._markerChange.next(s)}}return i.\u0275fac=function(s){return new(s||i)(f.LFG(l.eN),f.LFG(f.R0b))},i.\u0275prov=f.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()},2875:(T,M,a)=>{a.d(M,{a:()=>f});var e=a(655),t=a(7423);const C=(0,t.fo)("Geolocation",{web:()=>a.e(4561).then(a.bind(a,4561)).then(l=>new l.GeolocationWeb)});var p=a(9863);let f=(()=>{class l{constructor(){}getCurrentLocation(){return(0,e.mG)(this,void 0,void 0,function*(){if(t.dV.isPluginAvailable("Geolocation"))return yield C.getCurrentPosition({maximumAge:3e3,timeout:1e4,enableHighAccuracy:!1})})}}return l.\u0275fac=function(i){return new(i||l)},l.\u0275prov=p.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()}}]);