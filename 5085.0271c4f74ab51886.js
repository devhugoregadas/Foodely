"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5085],{5085:(J,g,a)=>{a.r(g),a.d(g,{SearchPageModule:()=>Z});var u=a(9808),p=a(4182),o=a(7110),c=a(1143),l=a(655),d=a(8929),f=a(3426),t=a(9863),m=a(5593),y=a(7020),S=a(3001),v=a(8081),P=a(5098);const b=["searchInput"];function O(e,r){1&e&&t._UZ(0,"app-loading-restaurant")}function A(e,r){if(1&e&&t._UZ(0,"app-empty-screen",4),2&e){const n=t.oxw();t.Q6J("model",n.model)}}const C=function(e){return["/","tabs","restaurants",e]};function I(e,r){if(1&e&&t._UZ(0,"app-restaurant",6),2&e){const n=r.$implicit;t.Q6J("restaurant",n)("routerLink",t.VKq(2,C,n.uid))}}function L(e,r){if(1&e&&(t.TgZ(0,"ion-list")(1,"ion-list-header")(2,"ion-label")(3,"h4"),t._uU(4),t.qZA()()(),t.YNc(5,I,1,4,"app-restaurant",5),t.qZA()),2&e){const n=t.oxw();t.xp6(4),t.hij('Search results for "',n.query,'"'),t.xp6(1),t.Q6J("ngForOf",n.restaurants)}}const Q=[{path:"",component:(()=>{class e{constructor(n,s){this.api=n,this.global=s,this.model={icon:"search-outline",title:"No Restaurants Found"},this.restaurants=[],this.startAt=new d.xQ,this.endAt=new d.xQ,this.startObs=this.startAt.asObservable(),this.endObs=this.endAt.asObservable(),this.location={}}ngOnInit(){setTimeout(()=>{this.sInput.setFocus()},500),this.querySub=(0,f.aj)(this.startObs,this.endObs).subscribe(n=>(0,l.mG)(this,void 0,void 0,function*(){console.log(n),yield this.queryResults(n[0],n[1])}))}queryResults(n,s){return(0,l.mG)(this,void 0,void 0,function*(){try{this.isLoading=!0;const i=yield this.api.searchRestaurantByName(n,s);this.restaurants=yield i.docs.map(h=>h.data()),this.isLoading=!1}catch(i){console.log(i),this.isLoading=!1,this.global.errorToast()}})}onSearchChange(n){return(0,l.mG)(this,void 0,void 0,function*(){console.log(n.detail.value),this.query=n.detail.value.toLowerCase(),this.querySearch()})}querySearch(){this.restaurants=[],this.query.length>0&&(this.startAt.next(this.query),this.endAt.next(this.query+"\uf8ff"))}ngOnDestroy(){this.querySub&&this.querySub.unsubscribe()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(m.s),t.Y36(y.U))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-search"]],viewQuery:function(n,s){if(1&n&&t.Gf(b,5),2&n){let i;t.iGM(i=t.CRH())&&(s.sInput=i.first)}},decls:8,vars:3,consts:[["animated","true","debounce","800",3,"ionChange"],["searchInput",""],[4,"ngIf"],[3,"model",4,"ngIf"],[3,"model"],[3,"restaurant","routerLink",4,"ngFor","ngForOf"],[3,"restaurant","routerLink"]],template:function(n,s){1&n&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-searchbar",0,1),t.NdJ("ionChange",function(h){return s.onSearchChange(h)}),t.qZA()()(),t.TgZ(4,"ion-content"),t.YNc(5,O,1,0,"app-loading-restaurant",2),t.YNc(6,A,1,1,"app-empty-screen",3),t.YNc(7,L,6,2,"ion-list",2),t.qZA()),2&n&&(t.xp6(5),t.Q6J("ngIf",s.isLoading),t.xp6(1),t.Q6J("ngIf",!s.isLoading&&(0==(null==s.restaurants?null:s.restaurants.length)||0==(null==s.query?null:s.query.length))),t.xp6(1),t.Q6J("ngIf",!s.isLoading&&s.restaurants.length>0))},directives:[o.Gu,o.sr,o.VI,o.j9,o.W2,u.O5,S.R,v.s,o.q_,o.yh,o.Q$,u.sg,P.m,o.YI,c.rH],styles:[".ios[_ngcontent-%COMP%]   ion-searchbar[_ngcontent-%COMP%]{margin-top:1rem}"]}),e})()}];let T=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[c.Bz.forChild(Q)],c.Bz]}),e})();var M=a(5642);let Z=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[u.ez,p.u5,o.Pc,T,M.K]]}),e})()}}]);