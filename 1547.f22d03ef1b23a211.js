"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1547],{1547:(z,_,r)=>{r.r(_),r.d(_,{ItemsPageModule:()=>L});var c=r(9808),d=r(4182),a=r(7110),m=r(1143),h=r(655),t=r(9863),p=r(1479),f=r(7020),I=r(3587),v=r(3668),Z=r(162);function x(n,s){1&n&&(t.TgZ(0,"ion-grid",1)(1,"ion-item",2)(2,"ion-label")(3,"h1"),t._UZ(4,"ion-skeleton-text",3),t.qZA(),t.TgZ(5,"p"),t._UZ(6,"ion-skeleton-text",4),t.qZA(),t.TgZ(7,"p"),t._UZ(8,"ion-skeleton-text",5),t.qZA()()(),t.TgZ(9,"ion-row")(10,"ion-col",6)(11,"ion-label",7)(12,"p"),t._UZ(13,"ion-skeleton-text",8),t.qZA(),t.TgZ(14,"p"),t._UZ(15,"ion-skeleton-text",9),t.qZA()()(),t.TgZ(16,"ion-col",6)(17,"ion-label",7)(18,"p"),t._UZ(19,"ion-skeleton-text",8),t.qZA(),t.TgZ(20,"p"),t._UZ(21,"ion-skeleton-text",9),t.qZA()()(),t.TgZ(22,"ion-col",6)(23,"ion-label",7)(24,"p"),t._UZ(25,"ion-skeleton-text",8),t.qZA(),t.TgZ(26,"p"),t._UZ(27,"ion-skeleton-text",9),t.qZA()()()()())}function C(n,s){if(1&n&&(t.TgZ(0,"ion-text")(1,"p"),t._uU(2),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(2),t.Oqu(e.getCuisine(e.data.cuisines))}}function y(n,s){if(1&n&&(t.TgZ(0,"ion-grid",1)(1,"ion-row",10)(2,"ion-label")(3,"h1"),t._uU(4),t.qZA(),t.YNc(5,C,3,1,"ion-text",11),t.TgZ(6,"p"),t._uU(7),t.qZA()()(),t.TgZ(8,"ion-row")(9,"ion-col",6)(10,"ion-label",7)(11,"ion-text")(12,"p"),t._UZ(13,"ion-icon",12),t._uU(14),t.qZA()(),t.TgZ(15,"p"),t._uU(16,"Ratings"),t.qZA()()(),t.TgZ(17,"ion-col",6)(18,"ion-label",7)(19,"ion-text")(20,"p"),t._uU(21),t.qZA()(),t.TgZ(22,"p"),t._uU(23,"Delivery Time"),t.qZA()()(),t.TgZ(24,"ion-col",6)(25,"ion-label",7)(26,"ion-text")(27,"p"),t._uU(28),t.qZA()(),t.TgZ(29,"p"),t._uU(30,"For Two"),t.qZA()()()()()),2&n){const e=t.oxw();t.xp6(4),t.Oqu(null==e.data?null:e.data.name),t.xp6(1),t.Q6J("ngIf",null==e.data?null:e.data.cuisines),t.xp6(2),t.Oqu(null==e.data?null:e.data.address),t.xp6(7),t.hij("",null==e.data?null:e.data.rating," "),t.xp6(7),t.hij(" ",null==e.data?null:e.data.delivery_time," MINS "),t.xp6(7),t.hij(" CHF ",null==e.data?null:e.data.price," ")}}let T=(()=>{class n{constructor(){}ngOnInit(){}getCuisine(e){return e.join(", ")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-restaurant-detail"]],inputs:{data:"data",isLoading:"isLoading"},decls:2,vars:2,consts:[["class","borderBottom",4,"ngIf"],[1,"borderBottom"],["lines","none",1,"ion-padding-horizontal","dashedBorderBottom"],["animated","",2,"width","50%"],["animated","",2,"width","60%"],["animated","",2,"width","80%"],["size","4"],[1,"ion-text-center"],["animated","",2,"width","30%"],["animated","",2,"width","35%"],[1,"ion-padding-horizontal","dashedBorderBottom"],[4,"ngIf"],["name","star"]],template:function(e,i){1&e&&(t.YNc(0,x,28,0,"ion-grid",0),t.YNc(1,y,31,6,"ion-grid",0)),2&e&&(t.Q6J("ngIf",i.isLoading),t.xp6(1),t.Q6J("ngIf",(null==i.data?null:i.data.name)&&!i.isLoading))},directives:[c.O5,a.jY,a.Ie,a.Q$,a.CK,a.Nd,a.wI,a.yW,a.gu],styles:[".dashedBorderBottom[_ngcontent-%COMP%]{padding-bottom:1vh;margin-bottom:1vh}h1[_ngcontent-%COMP%]{font-weight:700;font-size:1.2rem}"]}),n})();var P=r(3001),q=r(8081);function M(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"ion-row",5),t.NdJ("click",function(){return t.CHM(e),t.oxw().quantityPlus()}),t.TgZ(1,"ion-text",6),t._uU(2,"Add"),t.qZA()()}}function A(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"ion-row")(1,"ion-icon",7),t.NdJ("click",function(){return t.CHM(e),t.oxw().quantityMinus()}),t.qZA(),t.TgZ(2,"ion-text",8),t._uU(3),t.qZA(),t.TgZ(4,"ion-icon",9),t.NdJ("click",function(){return t.CHM(e),t.oxw().quantityPlus()}),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(3),t.Oqu(null==e.item?null:e.item.quantity)}}let w=(()=>{class n{constructor(){this.fallbackImage="assets/imgs/1.jpg",this.add=new t.vpe,this.minus=new t.vpe}ngOnInit(){}onImgError(e){e.target.src=this.fallbackImage}quantityPlus(){this.add.emit(this.item)}quantityMinus(){this.minus.emit(this.item)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-item"]],inputs:{item:"item",index:"index"},outputs:{add:"add",minus:"minus"},decls:14,vars:9,consts:[["slot","start"],[3,"src","error"],[1,"ion-text-wrap"],[3,"click",4,"ngIf"],[4,"ngIf"],[3,"click"],["color","success",1,"add"],["color","success","name","remove-outline",3,"click"],["color","success",1,"ion-text-center","quantity"],["color","success","name","add-outline",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"ion-item")(1,"ion-thumbnail",0)(2,"img",1),t.NdJ("error",function(o){return i.onImgError(o)}),t.qZA()(),t.TgZ(3,"ion-label",2)(4,"ion-text"),t._uU(5),t.qZA(),t.TgZ(6,"p"),t._uU(7),t.qZA(),t.TgZ(8,"ion-text")(9,"p"),t._uU(10),t.ALo(11,"number"),t.qZA()()(),t.YNc(12,M,3,0,"ion-row",3),t.YNc(13,A,5,1,"ion-row",4),t.qZA()),2&e&&(t.xp6(2),t.Q6J("src",null!=i.item&&i.item.cover?null==i.item?null:i.item.cover:i.fallbackImage,t.LSH),t.xp6(3),t.Oqu(null==i.item?null:i.item.name),t.xp6(2),t.Oqu(null==i.item?null:i.item.desc),t.xp6(3),t.hij("CHF ",t.xi3(11,6,null==i.item?null:i.item.price,"0.2-2"),""),t.xp6(2),t.Q6J("ngIf",!(null!=i.item&&i.item.quantity)||(null==i.item?null:i.item.quantity)<=0),t.xp6(1),t.Q6J("ngIf",(null==i.item?null:i.item.quantity)>0))},directives:[a.Ie,a.Bs,a.Q$,a.yW,c.O5,a.Nd,a.gu],pipes:[c.JJ],styles:["ion-thumbnail[_ngcontent-%COMP%]{height:10vh;width:20vw}ion-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:5px;height:100%;width:100%}ion-row[_ngcontent-%COMP%]{border:1px solid var(--ion-color-medium);border-radius:2px;padding:.3rem}.quantity[_ngcontent-%COMP%]{width:2rem}ion-text[_ngcontent-%COMP%]{font-size:.8rem}.add[_ngcontent-%COMP%]{padding:0 1.3rem}ion-label[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{font-size:.9rem!important;font-weight:700}ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.75rem!important}ion-label[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%], ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{max-width:25vh!important}"]}),n})();function O(n,s){1&n&&t._UZ(0,"app-loading-restaurant")}function D(n,s){if(1&n&&t._UZ(0,"app-empty-screen",9),2&n){const e=t.oxw();t.Q6J("model",e.model)}}function b(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"app-item",13),t.NdJ("add",function(l){return t.CHM(e),t.oxw(4).quantityPlus(l)})("minus",function(l){return t.CHM(e),t.oxw(4).quantityMinus(l)}),t.qZA()}if(2&n){const e=t.oxw(),l=e.index;t.Q6J("item",e.$implicit)("index",l)}}function U(n,s){if(1&n&&(t.TgZ(0,"ion-item-group"),t.YNc(1,b,1,2,"app-item",12),t.qZA()),2&n){const e=s.$implicit,i=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngIf",i.id==e.category_id.id)}}function J(n,s){if(1&n&&(t.TgZ(0,"ion-list",11)(1,"ion-list-header"),t._uU(2),t.qZA(),t.YNc(3,U,2,1,"ion-item-group",8),t.qZA()),2&n){const e=t.oxw().$implicit,i=t.oxw();t.xp6(2),t.hij(" ",null==e?null:e.name," "),t.xp6(1),t.Q6J("ngForOf",i.items)}}function N(n,s){if(1&n&&(t.ynx(0),t.YNc(1,J,4,2,"ion-list",10),t.BQk()),2&n){const e=s.$implicit,i=t.oxw();t.xp6(1),t.Q6J("ngIf",i.checkItemCategory(e.id))}}function S(n,s){1&n&&(t.TgZ(0,"span"),t._uU(1,"s"),t.qZA())}function Y(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"ion-footer")(1,"ion-toolbar",14)(2,"ion-label",15)(3,"h4"),t._uU(4),t.YNc(5,S,2,0,"span",6),t._uU(6),t.ALo(7,"number"),t.qZA(),t.TgZ(8,"ion-text",16)(9,"p"),t._uU(10,"Extra charges may apply"),t.qZA()()(),t.TgZ(11,"ion-button",17),t.NdJ("click",function(){return t.CHM(e),t.oxw().viewCart()}),t._UZ(12,"ion-icon",18),t._uU(13," VIEW CART "),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(4),t.hij("",null==e.cartData?null:e.cartData.totalItem," Item"),t.xp6(1),t.Q6J("ngIf",(null==e.cartData?null:e.cartData.totalItem)>1),t.xp6(1),t.hij(" | CHF ",t.xi3(7,3,null==e.cartData?null:e.cartData.totalPrice,"0.2-2"),"")}}const Q=[{path:"",component:(()=>{class n{constructor(e,i,l,o,u,g,B,R){this.navCtrl=e,this.route=i,this.router=l,this.cartService=o,this.global=u,this.restaurantService=g,this.menuService=B,this.categoryService=R,this.data={},this.items=[],this.veg=!1,this.cartData={},this.storedData={},this.model={icon:"fast-food-outline",title:"No Menu Available"},this.categories=[],this.allItems=[]}ngOnInit(){const e=this.route.snapshot.paramMap.get("restaurantId");console.log("check id: ",e),e?(this.id=e,console.log("id: ",this.id),this.cartSub=this.cartService.cart.subscribe(i=>{var l;console.log("cart items: ",i),this.cartData={},this.storedData={},i&&(null==i?void 0:i.totalItem)>0?(this.storedData=i,this.cartData.totalItem=this.storedData.totalItem,this.cartData.totalPrice=this.storedData.totalPrice,(null===(l=null==i?void 0:i.restaurant)||void 0===l?void 0:l.uid)===this.id?(this.allItems.forEach(o=>{let u=!1;i.items.forEach(g=>{o.id==g.id&&(o.quantity=g.quantity,u=!0)}),console.log(`element checked (${u}): `,(null==o?void 0:o.name)+" | "+(null==o?void 0:o.quantity)),!u&&(null==o?void 0:o.quantity)&&(o.quantity=0)}),console.log("allitems: ",this.allItems),this.cartData.items=this.allItems.filter(o=>o.quantity>0),this.items=1==this.veg?this.allItems.filter(o=>!0===o.veg):[...this.allItems]):(this.allItems.forEach(o=>{o.quantity=0}),this.items=1==this.veg?this.allItems.filter(o=>!0===o.veg):[...this.allItems])):(this.allItems.forEach(o=>{o.quantity=0}),this.items=1==this.veg?this.allItems.filter(o=>!0===o.veg):[...this.allItems])}),this.getItems()):this.navCtrl.back()}getItems(){return(0,h.mG)(this,void 0,void 0,function*(){try{this.isLoading=!0,this.data={},this.cartData={},this.storedData={},this.data=yield this.restaurantService.getRestaurantById(this.id),this.categories=yield this.categoryService.getRestaurantCategories(this.id),this.allItems=yield this.menuService.getRestaurantMenu(this.id),this.items=[...this.allItems],console.log("items: ",this.items),console.log("restaurant: ",this.data),yield this.cartService.getCartData(),this.isLoading=!1}catch(e){console.log(e),this.isLoading=!1,this.global.errorToast()}})}vegOnly(e){console.log(e.detail.checked),this.items=[],this.items=1==e.detail.checked?this.allItems.filter(i=>!0===i.veg):this.allItems,console.log("items: ",this.items)}quantityPlus(e){const i=this.allItems.findIndex(l=>l.id===e.id);console.log(i),this.allItems[i].quantity&&0!=this.allItems[i].quantity?this.cartService.quantityPlus(i,this.allItems,this.data):!this.storedData.restaurant||this.storedData.restaurant&&this.storedData.restaurant.uid==this.id?(console.log("index item: ",this.allItems),this.cartService.quantityPlus(i,this.allItems,this.data)):this.cartService.alertClearCart(i,this.allItems,this.data)}quantityMinus(e){const i=this.allItems.findIndex(l=>l.id===e.id);this.cartService.quantityMinus(i,this.allItems)}saveToCart(){try{this.cartData.restaurant={},this.cartData.restaurant=this.data,console.log("save cartData: ",this.cartData),this.cartService.saveCart()}catch(e){console.log(e)}}viewCart(){return(0,h.mG)(this,void 0,void 0,function*(){console.log("save cartdata: ",this.cartData),this.cartData.items&&this.cartData.items.length>0&&(yield this.saveToCart()),console.log("router url: ",this.router.url),this.router.navigate([this.router.url+"/cart"])})}checkItemCategory(e){return!!this.items.find(l=>l.category_id.id==e)}ionViewWillLeave(){var e,i;return(0,h.mG)(this,void 0,void 0,function*(){console.log("ionViewWillLeave ItemsPage"),(null===(e=this.cartData)||void 0===e?void 0:e.items)&&(null===(i=this.cartData)||void 0===i?void 0:i.items.length)>0&&(yield this.saveToCart())})}ngOnDestroy(){this.cartSub&&this.cartSub.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(a.SH),t.Y36(m.gz),t.Y36(m.F0),t.Y36(p.N),t.Y36(f.U),t.Y36(I.T),t.Y36(v.h),t.Y36(Z.H))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-items"]],decls:15,vars:7,consts:[[1,"ion-no-border"],["slot","start"],["defaultHref","/tabs/home"],[3,"data","isLoading"],[1,"ion-padding","veg","borderBottomSmall"],["mode","md","color","success",3,"ngModel","ionChange","ngModelChange"],[4,"ngIf"],[3,"model",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"model"],["lines","none",4,"ngIf"],["lines","none"],[3,"item","index","add","minus",4,"ngIf"],[3,"item","index","add","minus"],["color","success"],["color","white"],["color","light"],["slot","end","fill","clear","color","white",3,"click"],["slot","end","name","basket-outline"]],template:function(e,i){1&e&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),t._UZ(3,"ion-back-button",2),t.qZA()()(),t.TgZ(4,"ion-content"),t._UZ(5,"app-restaurant-detail",3),t.TgZ(6,"ion-row",4)(7,"ion-label")(8,"h4"),t._uU(9,"VEG ONLY"),t.qZA()(),t.TgZ(10,"ion-toggle",5),t.NdJ("ionChange",function(o){return i.vegOnly(o)})("ngModelChange",function(o){return i.veg=o}),t.qZA()(),t.YNc(11,O,1,0,"app-loading-restaurant",6),t.YNc(12,D,1,1,"app-empty-screen",7),t.YNc(13,N,2,1,"ng-container",8),t.qZA(),t.YNc(14,Y,14,6,"ion-footer",6)),2&e&&(t.xp6(5),t.Q6J("data",i.data)("isLoading",i.isLoading),t.xp6(5),t.Q6J("ngModel",i.veg),t.xp6(1),t.Q6J("ngIf",i.isLoading),t.xp6(1),t.Q6J("ngIf",!i.isLoading&&(0==(null==i.categories?null:i.categories.length)||0==(null==i.items?null:i.items.length))),t.xp6(1),t.Q6J("ngForOf",i.categories),t.xp6(1),t.Q6J("ngIf",(null==i.cartData?null:i.cartData.totalItem)>0))},directives:[a.Gu,a.sr,a.Sm,a.oU,a.cs,a.W2,T,a.Nd,a.Q$,a.ho,a.w,d.JJ,d.On,c.O5,P.R,q.s,c.sg,a.q_,a.yh,a.Ub,w,a.fr,a.yW,a.YG,a.gu],pipes:[c.JJ],styles:[".veg[_ngcontent-%COMP%]{align-items:center}ion-list-header[_ngcontent-%COMP%]{font-size:1rem;font-weight:700;letter-spacing:.5px}ion-footer[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], ion-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-left:3%}ion-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.55rem!important;letter-spacing:.5px}"]}),n})()},{path:"cart",loadChildren:()=>r.e(5949).then(r.bind(r,5949)).then(n=>n.CartPageModule)}];let k=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[m.Bz.forChild(Q)],m.Bz]}),n})();var F=r(5642);let L=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[c.ez,d.u5,a.Pc,k,F.K]]}),n})()}}]);