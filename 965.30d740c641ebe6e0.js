"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[965],{965:(Y,m,g)=>{g.r(m),g.d(m,{AddMenuItemPageModule:()=>N});var u=g(9808),d=g(4182),o=g(7110),p=g(1143),c=g(655),e=g(9863),h=g(7020),_=g(5593),f=g(3587),v=g(162),M=g(3668);const A=["filePicker"];function I(n,l){if(1&n&&(e.TgZ(0,"ion-select-option",29),e._uU(1),e.qZA()),2&n){const t=l.$implicit;e.Q6J("value",t.uid),e.xp6(1),e.Oqu(null==t?null:t.name)}}function Z(n,l){1&n&&(e.TgZ(0,"ion-text",30)(1,"p",31),e._uU(2,"* Select Restaurant"),e.qZA()())}function T(n,l){if(1&n&&(e.TgZ(0,"ion-select-option",29),e._uU(1),e.qZA()),2&n){const t=l.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(null==t?null:t.name)}}function x(n,l){1&n&&(e.TgZ(0,"ion-text",30)(1,"p",31),e._uU(2,"* Select Category"),e.qZA()())}function y(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"ion-item")(2,"ion-label"),e._uU(3,"Select Category"),e.qZA(),e.TgZ(4,"ion-select",32,33),e.NdJ("ngModelChange",function(a){return e.CHM(t),e.oxw().category=a}),e.YNc(6,T,2,2,"ion-select-option",9),e.qZA()(),e.YNc(7,x,3,0,"ion-text",10),e.qZA()}if(2&n){const t=e.MAs(5),i=e.oxw();e.xp6(4),e.Q6J("ngModel",i.category),e.xp6(2),e.Q6J("ngForOf",i.categories),e.xp6(1),e.Q6J("ngIf",!t.valid&&t.touched)}}function P(n,l){1&n&&(e.TgZ(0,"ion-text",34)(1,"p",31),e._uU(2,"* Please enter your name"),e.qZA()())}function b(n,l){1&n&&(e.TgZ(0,"ion-text",34)(1,"p",31),e._uU(2,"* Please enter the price"),e.qZA()())}function J(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",35),e.NdJ("click",function(){return e.CHM(t),e.oxw().changeImage()}),e._UZ(1,"ion-icon",36),e.TgZ(2,"p"),e._uU(3,"Upload Item Image here"),e.qZA()()}}function C(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",37),e.NdJ("click",function(){return e.CHM(t),e.oxw().changeImage()}),e._UZ(1,"ion-img",38),e.qZA()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("src",t.image)}}function Q(n,l){if(1&n&&(e.TgZ(0,"ion-button",39),e._uU(1," Save "),e.qZA()),2&n){e.oxw();const t=e.MAs(8);e.Q6J("disabled",!t.valid)}}function U(n,l){if(1&n&&(e.TgZ(0,"div",40)(1,"ion-button",41),e._UZ(2,"ion-spinner",42),e.qZA()()),2&n){e.oxw();const t=e.MAs(8);e.xp6(1),e.Q6J("disabled",!t.valid)}}const S=[{path:"",component:(()=>{class n{constructor(t,i,a,r,s){this.global=t,this.apiService=i,this.restaurantService=a,this.categoryService=r,this.menuService=s,this.restaurants=[],this.categories=[],this.isLoading=!1,this.veg=!0,this.status=!0}ngOnInit(){this.getRestaurants()}getRestaurants(){return(0,c.mG)(this,void 0,void 0,function*(){try{this.global.showLoader(),this.restaurants=yield this.restaurantService.getRestaurants(),this.global.hideLoader()}catch(t){console.log(t),this.global.hideLoader(),this.global.errorToast()}})}changeRestaurant(t){return(0,c.mG)(this,void 0,void 0,function*(){try{console.log(t),this.global.showLoader(),this.categories=yield this.categoryService.getRestaurantCategories(t.detail.value),this.category="",this.global.hideLoader()}catch(i){console.log(i),this.global.hideLoader(),this.global.errorToast()}})}onSubmit(t){return(0,c.mG)(this,void 0,void 0,function*(){if(t.valid&&this.image)try{this.isLoading=!0;const i=yield this.uploadImage(this.imageFile);if(console.log(i),!i)return this.isLoading=!1,void this.global.errorToast("Image not uploaded, please try again");const a=Object.assign({cover:i,veg:this.veg,status:this.status},t.value);console.log("data: ",a),yield this.menuService.addMenuItem(a),this.isLoading=!1,this.global.successToast("Menu Item Added Successfully")}catch(i){console.log(i),this.isLoading=!1,this.global.errorToast()}})}changeImage(){this.filePickerRef.nativeElement.click()}onFileChosen(t){const i=t.target.files[0];if(!i)return;console.log("file: ",i),this.imageFile=i;const a=new FileReader;console.log(a),a.onload=()=>{const r=a.result.toString();this.image=r,console.log("image: ",this.image)},a.readAsDataURL(i)}uploadImage(t){return(0,c.mG)(this,void 0,void 0,function*(){try{if(null==t.type.match(/image\/*/))return;const a=t,r="menu/"+Date.now()+"_"+a.name;return yield this.apiService.uploadImage(a,r)}catch(i){console.log(i),this.global.errorToast("Image upload failed")}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(h.U),e.Y36(_.s),e.Y36(f.T),e.Y36(v.H),e.Y36(M.h))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-add-menu-item"]],viewQuery:function(t,i){if(1&t&&e.Gf(A,5),2&t){let a;e.iGM(a=e.CRH())&&(i.filePickerRef=a.first)}},decls:45,vars:11,consts:[["color","primary"],["slot","start"],["defaultHref","/admin"],[1,"ion-padding"],[3,"ngSubmit"],["f1","ngForm"],["lines","none"],["interface","popover","name","restaurant_id","ngModel","","required","",3,"ionChange"],["restaurant_id","ngModel"],[3,"value",4,"ngFor","ngForOf"],["color","danger","class","ion-text-center",4,"ngIf"],[4,"ngIf"],["name","person","slot","start","color","primary"],["type","text","name","name","ngModel","","placeholder","Name","required",""],["name","ngModel"],["color","danger",4,"ngIf"],["type","text","name","description","ngModel","","placeholder","Description"],["description","ngModel"],["name","cash-outline","slot","start","color","primary"],["type","number","name","price","ngModel","","placeholder","Price","required",""],["price","ngModel"],["slot","end","name","veg",3,"ngModel","ngModelChange"],["slot","end","name","status",3,"ngModel","ngModelChange"],["class","itemImage",3,"click",4,"ngIf"],["type","file","accept","image/jpeg",3,"change"],["filePicker",""],["class","itemImage imageDiv",3,"click",4,"ngIf"],["expand","block","shape","round","type","submit","color","primary",3,"disabled",4,"ngIf"],["class","ion-text-center",4,"ngIf"],[3,"value"],["color","danger",1,"ion-text-center"],[1,"errorMsg"],["interface","popover","name","category_id","required","",3,"ngModel","ngModelChange"],["category_id","ngModel"],["color","danger"],[1,"itemImage",3,"click"],["name","cloud-upload-outline","color","primary"],[1,"itemImage","imageDiv",3,"click"],[3,"src"],["expand","block","shape","round","type","submit","color","primary",3,"disabled"],[1,"ion-text-center"],["shape","round","color","primary",3,"disabled"],["name","circles"]],template:function(t,i){if(1&t){const a=e.EpF();e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),e._UZ(3,"ion-back-button",2),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5,"Add Menu Item"),e.qZA()()(),e.TgZ(6,"ion-content",3)(7,"form",4,5),e.NdJ("ngSubmit",function(){e.CHM(a);const s=e.MAs(8);return i.onSubmit(s)}),e.TgZ(9,"ion-list",6)(10,"ion-item")(11,"ion-label"),e._uU(12,"Select Restaurant"),e.qZA(),e.TgZ(13,"ion-select",7,8),e.NdJ("ionChange",function(s){return i.changeRestaurant(s)}),e.YNc(15,I,2,2,"ion-select-option",9),e.qZA()(),e.YNc(16,Z,3,0,"ion-text",10),e.YNc(17,y,8,3,"div",11),e.TgZ(18,"ion-item"),e._UZ(19,"ion-icon",12)(20,"ion-input",13,14),e.qZA(),e.YNc(22,P,3,0,"ion-text",15),e.TgZ(23,"ion-item"),e._UZ(24,"ion-textarea",16,17),e.qZA(),e.TgZ(26,"ion-item"),e._UZ(27,"ion-icon",18)(28,"ion-input",19,20),e.qZA(),e.YNc(30,b,3,0,"ion-text",15),e.TgZ(31,"ion-item")(32,"ion-label"),e._uU(33,"Veg"),e.qZA(),e.TgZ(34,"ion-toggle",21),e.NdJ("ngModelChange",function(s){return i.veg=s}),e.qZA()(),e.TgZ(35,"ion-item")(36,"ion-label"),e._uU(37,"Status"),e.qZA(),e.TgZ(38,"ion-toggle",22),e.NdJ("ngModelChange",function(s){return i.status=s}),e.qZA()(),e.YNc(39,J,4,0,"div",23),e.TgZ(40,"input",24,25),e.NdJ("change",function(s){return i.onFileChosen(s)}),e.qZA(),e.YNc(42,C,2,1,"div",26),e.qZA(),e.YNc(43,Q,2,1,"ion-button",27),e.YNc(44,U,3,1,"div",28),e.qZA()()}if(2&t){const a=e.MAs(14),r=e.MAs(21),s=e.MAs(29);e.xp6(15),e.Q6J("ngForOf",i.restaurants),e.xp6(1),e.Q6J("ngIf",!a.valid&&a.touched),e.xp6(1),e.Q6J("ngIf",(null==i.categories?null:i.categories.length)>0),e.xp6(5),e.Q6J("ngIf",!r.valid&&r.touched),e.xp6(8),e.Q6J("ngIf",!s.valid&&s.touched),e.xp6(4),e.Q6J("ngModel",i.veg),e.xp6(4),e.Q6J("ngModel",i.status),e.xp6(1),e.Q6J("ngIf",!i.image||""==i.image),e.xp6(3),e.Q6J("ngIf",i.image&&""!=i.image),e.xp6(1),e.Q6J("ngIf",!i.isLoading),e.xp6(1),e.Q6J("ngIf",i.isLoading)}},directives:[o.Gu,o.sr,o.Sm,o.oU,o.cs,o.wd,o.W2,d._Y,d.JL,d.F,o.q_,o.Ie,o.Q$,o.t9,o.QI,d.JJ,d.On,d.Q7,u.sg,o.n0,u.O5,o.yW,o.gu,o.pK,o.j9,o.g2,o.as,o.ho,o.w,o.Xz,o.YG,o.PQ],styles:["ion-item[_ngcontent-%COMP%]{border:1px solid var(--ion-color-medium);border-radius:5px;margin-top:1vh}.itemImage[_ngcontent-%COMP%]{border:1px solid var(--ion-color-medium);border-radius:5px;text-align:center;margin-top:1vh;padding:5vh}.imageDiv[_ngcontent-%COMP%]{height:200px}ion-img[_ngcontent-%COMP%]{height:100%;width:100%;object-fit:cover}input[type=file][_ngcontent-%COMP%]{display:none}"]}),n})()}];let q=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[p.Bz.forChild(S)],p.Bz]}),n})(),N=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[u.ez,d.u5,o.Pc,q]]}),n})()}}]);